% dp's Beamer template

% https://tex.stackexchange.com/questions/146529/design-a-custom-beamer-theme-from-scratch
% https://martinbjeldbak.com/ultimate-beamer-theme-list/
% https://www.sessions.edu/color-calculator/   #a60000

% Requirements
\usepackage[no-math]{fontspec}
\usepackage{lastpage}
\usepackage{graphicx}
\usepackage{datetime2}


% Colors
\definecolor{dpbPrimary}{RGB}{166,0,0}
\definecolor{dpbPrimary2}{RGB}{166,42,0}
\definecolor{dpbSecondary}{RGB}{0,158,163}
\definecolor{dpbTertiary}{RGB}{79,163,0}
\definecolor{dpbQuaternary}{RGB}{166,0,83}
\definecolor{dpbBlack}{RGB}{0,0,0}
\definecolor{dpbVeryLightGray}{RGB}{180,189,178}
\definecolor{dpbTitlePageHeader}{RGB}{166,0,0}
\definecolor{dpbTitlePageSubtitle}{RGB}{0,158,163}

\setbeamercolor{palette primary}{fg=dpbPrimary}
\setbeamercolor{palette secondary}{fg=dpbSecondary}
\setbeamercolor{palette tertiary}{fg=dpbTertiary}
\setbeamercolor{palette quaternary}{fg=dpbQuaternary}
\setbeamercolor{alerted text}{fg=dpbQuaternary}
\setbeamercolor{structure}{fg=dpbSecondary}
\setbeamercolor{subsection in toc}{fg=dpbTertiary}
\setbeamercolor{subsubsection in toc}{fg=dpbQuaternary}


% Fonts
\usefonttheme{professionalfonts}
\setmainfont{Latin Modern Roman}
\setsansfont{Latin Modern Roman}
\setmonofont{IBM Plex Mono Light}
\setbeamerfont{title}{family=\fontspec{Anglecia Pro Display}, size=\huge}
\setbeamerfont{author}{family=\fontspec{Anglecia Pro Display}, shape=\itshape, size=\large}
\setbeamerfont{frametitle}{family=\fontspec{Anglecia Pro Display}}
\setbeamerfont{institute}{family=\fontspec{Anglecia Pro Display}, size=\normalsize, shape=\normalfont}
\setbeamerfont{date}{family=\fontspec{Anglecia Pro Display}, size=\footnotesize, shape=\normalfont}
\setbeamerfont{footer}{family=\fontspec{Anglecia Pro Display}}


% Misc
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{itemize items}{\textasteriskcentered}


% Title frame
\setbeamertemplate{title page}{
	\usebeamercolor{title page}
	\topskip0pt
	\vspace*{\fill}
	\begin{center}
		\textcolor{dpbTitlePageHeader}{\usebeamerfont{title} \inserttitle}
		
		\vskip 0.15cm
	
		\textcolor{dpbTitlePageHeader}{\usebeamerfont{subtitle} \insertsubtitle}
		
		\vskip 1cm
	
		\usebeamerfont{author} \insertauthor
		
		\vskip 1cm
	
		\textcolor{dpbSecondary}{
		\usebeamerfont{institute} {\insertinstitute}}
		%\hskip 0.08cm \textemdash
		%\textendash
		
		\textcolor{dpbSecondary}{\usebeamerfont{date} {\insertdate}}
	\end{center}
	\vspace*{\fill}
	%
}

\newcommand{\inserttitleframe}{%
	\begin{frame}[plain]
		\titlepage
	\end{frame}
}


% Header of frame
\setbeamertemplate{frametitle}{
    \vspace{1mm}
	\begin{beamercolorbox}[wd=0.99\paperwidth]{frametitle}
		\ifx\insertframesubtitle\@empty%
    		\textcolor{dpbPrimary2}{\insertframetitle}
    		\else%
    		\textcolor{dpbPrimary2}{\insertframetitle}
    		
    		\textcolor{dpbPrimary2}{\normalsize\insertframesubtitle}
		\fi
                \vspace{0.7mm}
        
        \footnotesize{\insertsection \hspace{1mm}
    		\ifx\insertsubsection\@empty
            %
            \else
            $\rightharpoonup$ \hspace{1mm} \insertsubsection%
            \fi}
	\end{beamercolorbox}
}


% Footer
\setbeamertemplate{footline}{
	\textcolor{dpbVeryLightGray}{\usebeamerfont{footer}{
		\noindent\hfil\rule{\textwidth}{.1pt}\hfil
		\vskip 0.1cm
		\centering
		\resizebox{\textwidth}{!}{%
			\begin{tabular}{@{}lccr@{}}
				{\hskip 0.1cm \inserttitle} &
				{\textcopyright} {\insertauthor} &
				{\insertinstitute} {\textendash} {\insertdate} &
				page {\thepage} of {\pageref{LastPage}} \hskip 0.1cm
			\end{tabular}%
		}
		\vskip 0.06cm
	}}
}


% Frame for new section
%\AtBeginSection[]{
%    \begin{frame}
%    \vfill
%    \begin{beamercolorbox}{title}
%        \begin{centering}
%        \usebeamerfont{title}\inserttitle\par%
%        
%        \textdownarrow
%        
%        \usebeamerfont{title}\insertsectionhead\par%
%        \end{centering}
%    \end{beamercolorbox}
%    \vfill
%    \end{frame}
%}


% Frame for new subsection
%\AtBeginSubsection[]{
%    \begin{frame}
%    \vfill
%    \begin{beamercolorbox}{title}
%        \begin{centering}
%            \usebeamerfont{title}\inserttitle\par%
%            
%            \textdownarrow
%            
%            \usebeamerfont{title}\insertsectionhead\par%
%            
%            \textdownarrow
%            
%            \usebeamerfont{title}\insertsubsectionhead\par%
%        \end{centering}
%    \end{beamercolorbox}
%    \vfill
%\end{frame}
%}


% Table of contents
\setbeamertemplate{section in toc}{
    \begin{beamercolorbox}{normal text}
        \usebeamerfont{section in toc}%
        \inserttocsectionnumber \hspace{0pt}
        \inserttocsection\par%
    \end{beamercolorbox}
}


\setbeamertemplate{subsection in toc}{
    \begin{beamercolorbox}{normal text}
        \usebeamerfont{subsection in toc}%
        \hspace{2mm} %
        \inserttocsectionnumber .%
        \inserttocsubsectionnumber \hspace{0pt}
        \inserttocsubsection\par%
    \end{beamercolorbox}
}
